name: Stale issues and pull requests

on:
  workflow_dispatch:
  schedule:
    - cron: "21 4 * * *"

jobs:
  stale:
    permissions:
      issues: write
      pull-requests: write
    runs-on: ubuntu-latest

    steps:
      - uses: actions/stale@v10
        with:
          stale-issue-message: 'This issue is stale because it has been open 90 days with no activity. This issue will be closed in 30 days unless new comments are made or the stale label is removed. To skip these checks, apply the "lifecycle/frozen" label.'
          stale-pr-message: 'This PR is stale because it has been open 90 days with no activity. This PR will be closed in 30 days unless new comments are made or the stale label is removed. To skip these checks, apply the "lifecycle/frozen" label.'
          stale-issue-label: 'lifecycle/stale'
          stale-pr-label: 'lifecycle/stale'
          exempt-issue-labels: 'lifecycle/frozen'
          exempt-pr-labels: 'lifecycle/frozen'
          days-before-stale: 90
          close-issue-message: |
            ðŸ‘‹ This issue or feature request was automatically closed due to inactivity.

            It has been open for over 90 days without recent updates, and the information may now be outdated.

            If this is still relevant with the latest version of the **NVIDIA GPU Operator**, please feel free to reopen it or open a new issue with updated details, such as:
            - The GPU Operator version in use
            - Your Kubernetes version and environment
            - Logs, error messages, or a clear description of the request or problem

            Thank you for helping us keep the issue tracker clean and focused on current and actionable topics.

            â€” *NVIDIA GPU Operator Team*
          close-pr-message: 'This pull request was automatically closed due to inactivity.'
          days-before-issue-close: 0
          days-before-pr-close: 30
          remove-stale-when-updated: true
          operations-per-run: 1000
